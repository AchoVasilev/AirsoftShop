<section class="registration">
    <form [formGroup]="registerFormGroup" class="registration-form" (ngSubmit)="handleRegistration()">
        <section class="registration-data">
            <h2 class="registration-data-title">Вашите данни за доставка</h2>
            <article class="registration-wrapper">
                <article class="first-name-wrapper">
                    <label for="firstName">Име <span
                            [ngClass]="shouldShowErrorForControl('firstName') ? 'error' : ''">*</span></label>
                    <input type="text" id="firstName" name="firstName" formControlName="firstName"
                        [ngClass]="shouldShowErrorForControl('firstName') ? 'invalid' : ''">

                    <ng-container *ngIf="shouldShowErrorForControl('firstName')">
                        <p class="error" *ngIf="registerFormGroup.controls['firstName'].errors?.['required']">
                            Полето е задължително!
                        </p>
                        <p class="error" *ngIf="registerFormGroup.controls['firstName'].errors?.['minlength']">
                            Полето трябва да е с дължина поне 2 символа!
                        </p>
                        <p class="error" *ngIf="registerFormGroup.controls['firstName'].errors?.['maxlength']">
                            Полето трябва да е с максимална дължина от 40 символа!
                        </p>
                    </ng-container>
                </article>
                <article class="last-name-wrapper">
                    <label for="lastName">Фамилия <span
                            [ngClass]="shouldShowErrorForControl('lastName') ? 'error' : ''">*</span></label>
                    <input type="text" id="lastName" name="lastName" formControlName="lastName"
                        [ngClass]="shouldShowErrorForControl('lastName') ? 'invalid' : ''">

                    <ng-container *ngIf="shouldShowErrorForControl('lastName')">
                        <p class="error" *ngIf="registerFormGroup.controls['lastName'].errors?.['required']">
                            Полето е задължително!
                        </p>
                        <p class="error" *ngIf="registerFormGroup.controls['lastName'].errors?.['minlength']">
                            Полето трябва да е с дължина поне 2 символа!
                        </p>
                        <p class="error" *ngIf="registerFormGroup.controls['lastName'].errors?.['maxlength']">
                            Полето трябва да е с максимална дължина от 40 символа!
                        </p>
                    </ng-container>
                </article>
            </article>
            <article class="field-wrapper">
                <label for="streetName">Адрес <span
                        [ngClass]="shouldShowErrorForControl('streetName') ? 'error' : ''">*</span></label>
                <input type="text" id="streetName" name="streetName" formControlName="streetName"
                    [ngClass]="shouldShowErrorForControl('streetName') ? 'invalid' : ''">
                <ng-container *ngIf="shouldShowErrorForControl('streetName')">
                    <p class="error" *ngIf="registerFormGroup.controls['streetName'].errors?.['required']">
                        Полето е задължително!
                    </p>
                    <p class="error" *ngIf="registerFormGroup.controls['streetName'].errors?.['minlength']">
                        Полето трябва да е с дължина поне 2 символа!
                    </p>
                    <p class="error" *ngIf="registerFormGroup.controls['streetName'].errors?.['maxlength']">
                        Полето трябва да е с максимална дължина от 40 символа!
                    </p>
                </ng-container>
            </article>
            <article class="registration-wrapper">
                <article class="city-wrapper">
                    <label for="city">Град: <span
                            [ngClass]="shouldShowErrorForControl('cityName') ? 'error' : ''">*</span></label>
                    <select id="city" class="custom-select" *ngIf="cities" name="cityName" formControlName="cityName"
                        [ngClass]="shouldShowErrorForControl('cityName') ? 'invalid' : ''">
                        <option *ngFor="let city of cities" [value]="city.name">{{city.name}}</option>
                    </select>

                    <ng-container *ngIf="shouldShowErrorForControl('cityName')">
                        <p class="error" *ngIf="registerFormGroup.controls['cityName'].errors?.['required']">
                            Полето е задължително!
                        </p>
                    </ng-container>
                </article>
            </article>
            <article class="registration-wrapper">
                <article class="phone-wrapper">
                    <label for="phone">Телефонен номер
                        <span [ngClass]="shouldShowErrorForControl('phone') ? 'error' : ''">*</span></label>
                    <input type="text" id="phone" name="phone" formControlName="phone"
                        [ngClass]="shouldShowErrorForControl('phone') ? 'invalid' : ''">

                    <ng-container *ngIf="shouldShowErrorForControl('phone')">
                        <p class="error" *ngIf="registerFormGroup.controls['phone'].errors?.['required']">
                            Полето е задължително!
                        </p>
                        <p class="error" *ngIf="registerFormGroup.controls['phone'].errors?.['pattern']">
                            Въведете правилен телефонен номер!
                        </p>
                    </ng-container>
                </article>
                <article class="email-wrapper">
                    <label for="email">Електронна поща <span
                            [ngClass]="shouldShowErrorForControl('email') ? 'error' : ''">*</span></label>
                    <input type="text" id="email" name="email" formControlName="email"
                        [ngClass]="shouldShowErrorForControl('email') ? 'invalid' : ''">

                    <ng-container *ngIf="shouldShowErrorForControl('email')">
                        <p class="error" *ngIf="registerFormGroup.controls['email'].errors?.['required']">
                            Полето е задължително!
                        </p>
                        <p class="error" *ngIf="registerFormGroup.controls['email'].errors?.['email']">
                            Въведете правилен и-мейл!
                        </p>
                    </ng-container>
                </article>
            </article>
        </section>
        <section class="registration-login-data">
            <h2 class="registration-data-title">Данни за регистрация</h2>
            <article class="field-wrapper">
                <label for="username">Потребителско име/и-имейл
                    <span [ngClass]="shouldShowErrorForControl('username') ? 'error' : ''">*</span></label>
                <input type="text" id="username" name="username" formControlName="username"
                    [ngClass]="shouldShowErrorForControl('username') ? 'invalid' : ''">
                <p class="text">Потребителското име трябва да е с дължина между 3 и 40 символа(само числа и букви)</p>

                <ng-container *ngIf="shouldShowErrorForControl('username')">
                    <p class="error" *ngIf="registerFormGroup.controls['username'].errors?.['required']">
                        Полето е задължително!
                    </p>
                    <p class="error" *ngIf="registerFormGroup.controls['username'].errors?.['minlength']">
                        Полето трябва да е с дължина поне 2 символа!
                    </p>
                    <p class="error" *ngIf="registerFormGroup.controls['username'].errors?.['maxlength']">
                        Полето трябва да е с максимална дължина от 40 символа!
                    </p>
                </ng-container>
            </article>
            <article formGroupName="passwords" class="field-wrapper">
                <label for="password">Парола
                    <span
                        [ngClass]="shouldShowErrorForControl('password', passwordsGroup) ? 'error' : ''">*</span></label>
                <input type="password" id="password" name="password" formControlName="password"
                    [ngClass]="shouldShowErrorForControl('password', passwordsGroup) ? 'invalid' : ''">
                <p class="text">Паролата трябва да е с минимална дължина от 6 символа</p>

                <ng-container *ngIf="shouldShowErrorForControl('password', passwordsGroup)">
                    <p class="error" *ngIf="passwordsGroup.controls['password'].errors?.['required']">
                        Полето е задължително!
                    </p>
                    <p class="error" *ngIf="passwordsGroup.controls['password'].errors?.['minlength']">
                        Полето трябва да е с дължина поне 6 символа!
                    </p>
                </ng-container>
            </article>
            <article formGroupName="passwords" class="field-wrapper">
                <label for="repeatPassword">Повтори парола <span
                        [ngClass]="shouldShowErrorForControl('repeatPassword', passwordsGroup) ? 'error' : ''">*</span></label>
                <input type="password" id="repeatPassword" name="repeatPassword" formControlName="repeatPassword"
                    [ngClass]="shouldShowErrorForControl('repeatPassword', passwordsGroup) ? 'invalid' : ''">

                <ng-container *ngIf="shouldShowErrorForControl('repeatPassword', passwordsGroup)">
                    <p class="error" *ngIf="passwordsGroup.controls['repeatPassword'].errors?.['passwordMissmatch']">
                        Паролите не съвпадат!
                    </p>
                </ng-container>
            </article>
            <p class="text">Полетата, които имат * (звездичка), са задължителни.</p>
            <button [class.disabled]="registerFormGroup.invalid" [disabled]="registerFormGroup.invalid" type="submit"
                class="submit-btn">Регистрация</button>
        </section>
    </form>
</section>